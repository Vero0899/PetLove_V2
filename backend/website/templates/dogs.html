{% extends 'layout.html' %}

{% block title %}
PetLove - Dogs
{% endblock %}

{% block content %}
<h2 id="titulos"> Adopta a uno de nuestras Mascotas  - Llénalos de Amor  </h2>

<div id="carouselExample" class="carousel slide mb-5">
    <div class="carousel-inner">

        <div class="carousel-item active">
            <img src="https://petsonline.cl/cdn/shop/files/PetsOnline_BannersOk_Alimentos_2500x813_crop_center.jpg?v=1699537949"
                 class="d-block w-100 h-50" alt="...">
        </div>

        <div class="carousel-item ">
            <img src="https://petsonline.cl/cdn/shop/files/PetsOnline_BannersOk2_Juguetes4_2000x650_crop_center.jpg?v=1699479096"
                 class="d-block w-100 h-50" alt="...">
        </div>

    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<h2 id="titulos"> Cada una de nuestros amiguitos tiene su número de contacto e información personal  </h2>
        
        <!-- Comienzo bloque API -->
        <div class="apiStyle">
            <div id="mascotasCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner" id="carousel-inner">
                <!-- acá se inyectan los items desde Js -->
            </div>
            <a class="carousel-control-prev" href="#mascotasCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" id="flecha-prev-API" aria-hidden="true"></span>
                <span class="sr-only"></span>
            </a>
            <a class="carousel-control-next" href="#mascotasCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" id="flecha-next-API" aria-hidden="true"></span>
                <span class="sr-only"></span>
            </a>
    </div>

            <script>
            
            // URL de la API de Huachitos
            const apiUrl = "https://huachitos.cl/api/animales";
        
            // Función para obtener los datos de la API y actualizar el carrusel
            async function fetchMascotas() {
                try {
                    const response = await fetch(apiUrl);
                    const result = await response.json();
                    const data = result.data;
        
                    const carouselInner = document.getElementById('carousel-inner');
        
                    data.forEach((animal, index) => {
                        const item = document.createElement('div');
                        item.className = `carousel-item ${index === 0 ? 'active' : ''}`;
                        
                        item.innerHTML = `
                            <div class="carousel-content">
                                <div class="carousel-caption">
                                    <h5>${animal.nombre}</h5>
                                    <p><strong>Tipo:</strong> ${animal.tipo}</p>
                                    <p><strong>Género:</strong> ${animal.genero}</p>
                                    <p><strong>Descripción Física:</strong> ${animal.desc_fisica}</p>
                                </div>
                                <img src="${animal.imagen}" class="d-block" id="img-API" alt="${animal.nombre}">
                            </div>
                        `;

                        carouselInner.appendChild(item);
                    });
                } catch (error) {
                    console.error('Error fetching the data', error);
                }
            }
        
            // Llamar a la función para obtener los datos y actualizar el carrusel
            fetchMascotas();
            </script>    
            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </div>
  <!-- fin consumo API -->
    <!-- Info -->
<section class="mt-4 bg-body-tertiary">
    <article>
        <div style="padding: 6rem;" class=" row justify-content-center align-items-center">
            <div class="col">
                <div class="d-flex flex-column justify-content-center align-items-center gap-2" style="width: 16rem;">
                    <img style="width: 5rem;"
                         src="https://petsonline.cl/cdn/shop/files/PetsOnline_Iconos1.png?v=1701712758" alt="">
                    <span class="fw-bold fs-5">
                        Productos de calidad
                    </span>
                    <span class="fs-6">

Te aseguramos que lo que compres en nuestra tienda será lo mejor que encontrarás en el mercado para tus peludos.
                    </span>
                </div>
            </div>
            <div class="col">
                <div class="d-flex flex-column justify-content-center align-items-center gap-2" style="width: 16rem;">
                    <img style="width: 5rem;"
                         src="https://petsonline.cl/cdn/shop/files/PetsOnline_Iconos2.png?v=1701712765" alt="">
                    <span class="fw-bold fs-5">
                        Asesoría personalizada
                    </span>
                    <span class="fs-6">
                        Te asesoramos en tu compra para que puedas seleccionar de manera más fácil y rápida el producto que estás buscando.
                    </span>
                </div>
            </div>
            <div class="col">
                <div class="d-flex flex-column justify-content-center align-items-center gap-2" style="width: 16rem;">
                    <img style="width: 5rem;"
                         src="https://petsonline.cl/cdn/shop/files/PetsOnline_Iconos3.png?v=1701712773" alt="">
                    <span class="fw-bold fs-5">
                        Cercanía y confianza
                    </span>
                    <span class="fs-6">
                        Hacemos seguimiento a todas las familias con las que trabajamos, manteniendo un contacto cercano y duradero.
                    </span>
                </div>
            </div>
        </div>
    </article>
</section>


  <style>

    .apiStyle {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 10px;
        overflow: hidden; /* Opcional: para mantener todo dentro de los bordes redondeados */
        padding: 20px; /* Añadir un poco de espacio alrededor del carrusel */
        padding-top: 0%;
        padding-bottom: 5%;

    }

    .apiStyle .carousel-inner {
        position: relative;
        width: 100%;
        overflow: hidden;
    }

    .d-block{
        padding-left: 5%;

    }


    .apiStyle .carousel-caption {
        background: #c94dd480; /* Fondo oscuro semitransparente para mejorar la legibilidad del texto */
        border-radius: 8px; /* Bordes redondeados para los textos */
        max-width: 20%;
        max-height: 120%;
        padding-bottom: 2%;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        color: white;
        
    }


    #flecha-next-API,
    #flecha-prev-API{
        background-color: rgb(145, 12, 76);

    }


    #img-API{
        display: block;
        width: 600px; /* Ajuste del ancho de la imagen */
        height: 600px; /* Ajuste del alto de la imagen */
        object-fit: contain;  /* Asegura que la imagen se recorte en lugar de deformarse */
        margin: auto;

    }

    #titulos{
        color: dodgerblue;
        padding-bottom: 5%;
    }

</style>    

{% endblock %}